
<!--
<!DOCTYPE html>
<section class="container centered">
 <div class="about">
    
    <div id="wallpaper">
      <img src="./images/pak_panang_groves.jpg">
    </div>
    
   </div>
</section>
-->

<section class="container centered">
  <div class="about">
    
    <!--debug block-->
    <!-- <pre>{{ jsonify .Site.Data.photos | safeHTML }}</pre> -->

    <!-- Swiper styles -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <!-- Swiper container -->
    <div class="swiper-container">
      <div class="swiper-wrapper">
        {{ range .Site.Data.photos }}
          <div class="swiper-slide">
            <img src="{{ .url }}" alt="{{ .alt }}">
          </div>
        {{ end }}
      </div>

      <!-- Navigation and pagination -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>

    <!-- Swiper script -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const container = document.querySelector('.swiper-container');
        const images = container.querySelectorAll('img');
      
        let loadedImages = 0;
        images.forEach(img => {
          if (img.complete) {
            loadedImages++;
          } else {
            img.addEventListener('load', () => {
              loadedImages++;
              if (loadedImages === images.length) {
                initSwiper();
              }
            });
            img.addEventListener('error', () => {
              loadedImages++;  // count errors to avoid hanging
              if (loadedImages === images.length) {
                initSwiper();
              }
            });
          }
        });
      
        // If all images are already loaded
        if (loadedImages === images.length) {
          initSwiper();
        }
      
        function initSwiper() {
          if (!window.mySwiper) {
            window.mySwiper = new Swiper('.swiper-container', {
              loop: true,
              autoplay: { delay: 5000, disableOnInteraction: false },
              pagination: { el: '.swiper-pagination', clickable: true },
              navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' }
            });
          }
        }
      });
    </script>

  </div>
</section>
